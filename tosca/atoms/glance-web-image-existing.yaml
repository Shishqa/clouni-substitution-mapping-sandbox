tosca_definitions_version: tosca_simple_yaml_1_3

imports:

- namespace_prefix: openstack
  file: ../profiles/openstack/main.yaml

topology_template:

  node_templates:

    os_image:
      type: openstack:glance.WebImage
      interfaces:
        Standard:
          operations:
            configure:
              inputs:
                required_distro:
                  value: { get_property: [ SELF, image, distribution ] }
                  type: string
                required_arch:
                  value: { get_property: [ SELF, image, architecture ] }
                  type: string
                required_version:
                  value: { get_property: [ SELF, image, version ] }
                  type: string
              outputs:
                id: [ SELF, image, openstack_id ]
              implementation: artifacts/os_image_find.yaml

  substitution_mappings:
    node_type: openstack:glance.WebImage
    capabilities:
      image: [ os_image, image ]

tosca_definitions_version: tosca_simple_yaml_1_3

metadata:
  template_name: "kubetos"
  template_author: "shishqa"
  template_version: "1.0"

imports:
  - main.yaml

topology_template:

  inputs:

    kubernetes_version:
      type: version
      default: 1.21.0

    cluster_name:
      type: string
      default: kubernetes-cluster

    cluster_cidr:
      type: string
      default: 10.233.0.0/16

    service_cidr:
      type: string
      default: 10.32.0.0/16

    dns_ip:
      type: string
      default: 10.32.0.3

  node_templates:

    cluster_a:
      type: kubetos.nodes.Abstract.Cluster
      properties:
        component_version: { get_input: [ kubernetes_version ] }
        cluster_cidr: { get_input: [ cluster_cidr ] }
        service_cidr: { get_input: [ service_cidr ] }
        dns_ip: { get_input: [ dns_ip ] }
      directives:
        - substitute